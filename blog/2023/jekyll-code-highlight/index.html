<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Code highlighting in jekyll | karuken</title> <meta name="author" content=" cargocultprg"> <meta name="description" content="Highlight code in jekyll and mark individual lines"> <meta name="keywords" content="jekyll, python, django"> <link rel="stylesheet" href="/assets/css/karuken.css?3bb37cbc33c05c8d466b8fc85560edfc"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%90%99&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://drivel.karuken.quest/blog/2023/jekyll-code-highlight/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container align-items-center"> <div class="karuken-header flex px-3"> <div>( .<sup>^</sup>. )</div> <div> ((( )))</div> </div> <a class="navbar-brand title font-weight-lighter" href="/">karuken</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/"></a> </li> <li class="nav-item active"> <a class="nav-link" href="/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/_pages/about/">about</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Code highlighting in jekyll</h1> <p class="post-meta">December 1, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/tag/jekyll"> <i class="fas fa-hashtag fa-sm"></i> jekyll</a>   <a href="/blog/tag/ruby"> <i class="fas fa-hashtag fa-sm"></i> ruby</a>   <a href="/blog/tag/liquid"> <i class="fas fa-hashtag fa-sm"></i> liquid</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Code highlighting is a standard feature in jekyll. There are plenty of examples and explanations out there, for example from the <a href="https://jun711.github.io/web/how-to-highlight-code-on-a-Jekyll-site-syntax-highlighting/" rel="external nofollow noopener" target="_blank">Jun711 blog</a> and many other sources. I wont repeat the basic functionality here. This is how this looks for python:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td> <td class="code"><pre><span class="c1">#!/usr/bin/env python
# syntax highlighting
</span>
<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>  <span class="c1"># Class definition
</span>    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>  <span class="c1"># function definition
</span>        <span class="k">if</span> <span class="sh">'</span><span class="s">string</span><span class="sh">'</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
</pre></td> </tr></tbody></table></code></pre></figure> <p>I do want to talk about highlighting <em>individual lines</em> within code blocks: Jekyll uses the <a href="https://github.com/rouge-ruby/rouge" rel="external nofollow noopener" target="_blank">rouge highlighter</a> which has the option to mark individual lines to point out individual code parts.</p> <p>That however is not implemented in jekyll itself, so while the underlying engine has the option jekyll doesnt tie into it. It took me a while and a few unsucessful workaround-attempts and digging in github comments to finally find out that the necessary parsing has finally been added and will be published with the 4.4.0 release of jekyll as noted in <a href="https://jekyllrb.com/docs/liquid/tags/#marking-specific-lines" rel="external nofollow noopener" target="_blank">this section of the jekyll docs</a>.</p> <p>However this will not allow to use this feature in markdown code blocks, only using the liquid markup. So the full feature will look something like this:</p> <p>{% highlight python linenos mark_lines=”3 4 5” %} <br> code goes here <br> {% endhighlight %}</p> <p>And - as soon as I have migrated to jekyll 4.4.0, the code below should show some highlighted lines:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td> <td class="code"><pre><span class="c1">#!/usr/bin/env python                       &lt;-- should be marked
# syntax highlighting
</span>
<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>  <span class="c1"># Class definition      # &lt;-- should be marked
</span>    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>  <span class="c1"># function definition
</span>        <span class="k">if</span> <span class="sh">'</span><span class="s">string</span><span class="sh">'</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
</pre></td> </tr></tbody></table></code></pre></figure> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h5 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h5> <p class="mb-2 small">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="small text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/quick-setup-django-pegasus/">Quick setup for django pegasus</a> </li> <li class="my-2"> <a class="small text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/creative-commons-font-icons/">Creative commons font icons</a> </li> <li class="my-2"> <a class="small text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/webapp-setup-on-vps/">Configure a VPS for web apps</a> </li> <li class="my-2"> <a class="small text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/webhooks/">Easy-automate git deploys</a> </li> <li class="my-2"> <a class="small text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/rsync-recipes-and-faq/">rsync quick reference</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0 py-0"> <div class="row small align-items-center"> <div class="col-12 col-md-3 container"> <span class="container" style="font-size:20px; vertical-align: middle;"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener" target="_blank">🅭🅯🄏🄎</a></span> 2023 cargocultprg </div> <div class="col-md-auto container d-none d-md-inline"> | </div> <div class="col container text-center"> <a href="https://drivel.karuken.quest/imprint">Imprint</a> </div> <div class="col-md-auto container d-none d-md-inline"> | </div> <div class="col-md-4 container d-none d-md-inline"> last update: December 17, 2023 </div> <div class="col container d-none d-md-inline"> </div> </div> </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>